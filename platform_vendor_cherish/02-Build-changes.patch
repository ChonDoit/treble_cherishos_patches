From 653412c6e19d2eed48c2bcb193e490f4be2d8fa3 Mon Sep 17 00:00:00 2001
From: ChonDoit <thphantomblog@gmail.com>
Date: Wed, 27 Apr 2022 03:40:35 +0000
Subject: [PATCH] Build Changes

---
 config/common.mk | 37 ++++++++++++++++++++++++-------------
 1 file changed, 24 insertions(+), 13 deletions(-)

diff --git a/config/common.mk b/config/common.mk
index a6c1638f..f924c946 100644
--- a/config/common.mk
+++ b/config/common.mk
@@ -3,6 +3,19 @@ $(call inherit-product, vendor/cherish/config/main_version.mk)
 
 PRODUCT_BRAND ?= CherishOS
 
+PRODUCT_PRODUCT_PROPERTIES += \
+    dalvik.vm.dex2oat64.enabled=true
+
+PRODUCT_SYSTEM_PROPERTIES += \
+    persist.sys.binary_xml=false
+
+# The Gapps
+$(call inherit-product, vendor/gapps/config.mk)
+
+CHERISH_VANILLA := true
+WITH_THEGAPPS := true
+WITH_ASSISTANT := false
+USE_CCACHE := true
 TARGET_NO_KERNEL_OVERRIDE := true
 
 PRODUCT_BUILD_PROP_OVERRIDES += BUILD_UTC_DATE=0
@@ -15,11 +28,8 @@ PRODUCT_SYSTEM_DEFAULT_PROPERTIES += \
     ro.com.google.clientidbase=$(PRODUCT_GMS_CLIENTID_BASE)
 endif
 
-# ART
-# Optimize everything for preopt
-PRODUCT_DEX_PREOPT_DEFAULT_COMPILER_FILTER := everything
 # Don't preopt prebuilts
-DONT_DEXPREOPT_PREBUILTS := true
+DONT_DEXPREOPT_PREBUILTS := false
 
 PRODUCT_PROPERTY_OVERRIDES += \
     pm.dexopt.boot=verify \
@@ -173,7 +183,8 @@ PRODUCT_PACKAGES += \
 
 # Dex preopt
 PRODUCT_DEXPREOPT_SPEED_APPS += \
-    SystemUI
+    SystemUI \
+    Launcher3QuickStep
 
 # SystemUI plugins
 PRODUCT_PACKAGES += \
@@ -207,11 +218,11 @@ PRODUCT_PRODUCT_PROPERTIES += \
     setupwizard.feature.day_night_mode_enabled=true \
     setupwizard.feature.portal_notification=true
 
-TARGET_BUILD_GRAPHENEOS_CAMERA ?= false
-ifeq ($(strip $(TARGET_BUILD_GRAPHENEOS_CAMERA)),true)
+#TARGET_BUILD_GRAPHENEOS_CAMERA ?= true
+#ifeq ($(strip $(TARGET_BUILD_GRAPHENEOS_CAMERA)),true)
 PRODUCT_PACKAGES += \
     GrapheneCamera
-endif
+#endif
 
 # StorageManager configuration
 PRODUCT_PRODUCT_PROPERTIES += \
@@ -247,7 +258,7 @@ PRODUCT_PRODUCT_PROPERTIES += \
 TARGET_SUPPORTS_GOOGLE_RECORDER ?= true
 TARGET_INCLUDE_STOCK_ARCORE ?= false
 TARGET_INCLUDE_LIVE_WALLPAPERS ?= false
-TARGET_SUPPORTS_QUICK_TAP ?= false
+TARGET_SUPPORTS_QUICK_TAP ?= true
 
 # Face Unlock
 TARGET_FACE_UNLOCK_SUPPORTED ?= true
@@ -273,10 +284,10 @@ $(call inherit-product, vendor/cherish/config/bootanimation.mk)
 # Fonts
 $(call inherit-product, vendor/cherish/config/fonts.mk)
 
-ifeq ($(EXTRA_UDFPS_ANIMATIONS),true)
-PRODUCT_PACKAGES += \
-    UdfpsResources
-endif
+#ifeq ($(EXTRA_UDFPS_ANIMATIONS),true)
+#PRODUCT_PACKAGES += \
+#    UdfpsResources
+#endif
 
 # Build
 ifeq ($(CHERISH_VANILLA), true)
-- 
2.17.0

